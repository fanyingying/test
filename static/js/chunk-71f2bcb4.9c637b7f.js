(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71f2bcb4"],{"05f2":function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.multiHeader,e.header,e.list),n=e.filename,o=(e.merges,e.autoWidth,e.bookType,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){});Promise.all([a.e("chunk-e69e90f4"),a.e("chunk-58293907")]).then(a.bind(null,"4bf8d")).then(function(e){var a=["id","在线状态","设备ID号","设备名称","设备类型","垃圾量L(mm)","溢满度L","垃圾量R(mm)","溢满度R","温度(℃)","电压(mV)","倾角(°)","信号强度(dBm)","上报类型","设备状态","连接方式","网络地址","经度","纬度","更新时间","维护人","组织结构","备注"],l=["id","lineStatus","devId","devName","devType","rubbishL","rubbishML","rubbishR","rubbishMR","tmp","batV","angle","signalQ","reportType","devStatus","connectType","devSimNum","latitude","longitude","combination","rubbishHeight"],r=s(l,t);e.export_json_to_excel({header:a,data:r,filename:n}),o()})}function s(e,t){return t.map(function(t){return e.map(function(e){return"devStatus"===e?o[t[e]]:"reportType"===e?l[t[e]]:"onlineStatus"===e?lineStatusArr[t[e]]:"devType"===e?"垃圾箱监控器":"rubbishML"===e?(100*t.rubbishL/t.rubbishHeight).toFixed(1)+"%":"rubbishMR"===e?(100*t.rubbishR/t.rubbishHeight).toFixed(1)+"%":"tmp"===e?(t.tmp/100).toFixed(2)+"%":t[e]})})}a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"d",function(){return l}),a.d(t,"c",function(){return r});var o={0:"正常",1:"打开/倾斜",2:"距离传感器异常",4:"三轴传感器异常",8:"温度传感器异常",16:"外部存储异常",32:"RTC 时钟异常",64:"电池异常",128:"GPS 异常"},l={0:"实时上报",1:"垃圾溢满上报",2:"垃圾清理上报",4:"超温上报",8:"倾斜上报",16:"电池欠压上报",32:"部件故障上报",64:"多报数据",128:"心跳信号"},r={1:"在线",2:"异常",3:"离线"}},"1a1d":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("b775"),s=a("ed08");function o(e){return Object(n["a"])({url:Object(s["e"])("/allTerminalDataShow",e),method:"get"})}},"3a46":function(e,t,a){"use strict";var n=a("cf5f"),s=a.n(n);s.a},"9e76":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map-container"},[a(e.currentRole,{tag:"component"})],1)},s=[],o=a("cebc"),l=a("2f62"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("baidu-map",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"map",attrs:{"element-loading-text":"拼命加载中",center:e.center,zoom:e.zoom,"scroll-wheel-zoom":!0,"map-click":!1,ak:"oc9T5rviS8tIYPifGK5UI2CmGAYebjiu"},on:{ready:e.handler}},[a("bm-scale",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_LEFT"}}),e._v(" "),a("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT"}}),e._v(" "),a("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0}}),e._v(" "),a("bml-marker-clusterer",{attrs:{averageCenter:!0}},e._l(e.points,function(t,n){return t.longitude?a("bm-marker",{key:t.id,attrs:{icon:e.getIconUrl(t),position:{lng:t.longitude,lat:t.latitude}},on:{click:function(a){return e.markerClick(t,n)}}}):e._e()}),1),e._v(" "),e.selectedData?a("bm-info-window",{attrs:{position:{lng:e.selectedData.longitude,lat:e.selectedData.latitude},title:"监控终端信息",show:e.showInfoWindow,autoPan:!0,height:390,width:520,closeOnClick:!1},on:{clickclose:e.infoWindowClose,open:e.infoWindowOpen}},[a("div",{staticClass:"infowindow"},[a("i",{staticClass:"el-icon-close close-btn",on:{click:e.infoWindowClose}}),e._v(" "),a("el-form",{attrs:{model:e.selectedData}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备类型："}},[a("span",[e._v("垃圾箱监控器")])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备ID："}},[a("span",[e._v(e._s(e.selectedData.devId))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组织机构："}},[a("span",[e._v(e._s(e.selectedData.combination))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备名称："}},[a("span",[e._v(e._s(e.selectedData.devName))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"垃圾量L："}},[a("span",[e._v(e._s(e.selectedData.rubbishL)+"mm")])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"溢满度L："}},[a("span",[e._v(e._s((100*e.selectedData.rubbishL/e.selectedData.rubbishHeight).toFixed(1))+" %")])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"垃圾量R："}},[a("span",[e._v(e._s(e.selectedData.rubbishR)+"mm")])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"溢满度R："}},[a("span",[e._v(e._s((100*e.selectedData.rubbishR/e.selectedData.rubbishHeight).toFixed(1))+" %")])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"信号强度："}},[a("span",[e._v(e._s(e.selectedData.signalQ)+"dBm")])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电压："}},[a("span",[e._v(e._s(e.selectedData.batV)+"mV")])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"倾角："}},[a("span",[e._v(e._s(e.selectedData.angle)+"°")])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"温度："}},[a("span",[e._v(e._s((e.selectedData.tmp/100).toFixed(2))+"℃")])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"连接类型："}},[a("span",[e._v(e._s(e.selectedData.connectType))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"网络地址："}},[a("span",[e._v(e._s(e.selectedData.devSimNum))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备型号："}},[a("span",[e._v(e._s(e.selectedData.reportType))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"位置："}},[a("span",[e._v(e._s(e.selectedData.longitude+","+e.selectedData.latitude))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"在线状态："}},[a("span",{class:"status status_"+e.selectedData.onlineStatus},[e._v(e._s(e.onlineStatusArr[e.selectedData.onlineStatus]))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上报类型："}},[a("span",[e._v(e._s(e.reportTypeArr[e.selectedData.reportType]))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"维护人："}},[a("span",[e._v(e._s(e.selectedData.maintenanceMan))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"报修电话："}},[a("span",[e._v(e._s(e.selectedData.maintenanceMan))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"更新时间："}},[a("span",[e._v(e._s(e.parseTime(e.selectedData.eventTime)))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:""}},[a("span",[e._v(" ")])])],1)],1)],1)],1)]):e._e()],1)],1)},i=[],c=a("05f2"),d=a("ed08"),u=a("bd0c"),m=a("1a1d"),p={data:function(){return{devStatusArr:c["b"],reportTypeArr:c["d"],onlineStatusArr:c["c"],isLoading:!0,center:{lng:116.404,lat:39.915},zoom:17,listQuery:{pageNo:1,pageSize:200},points:[],showInfoWindow:!1,showInfoWindowArr:[],selectedData:null}},components:{BaiduMap:u["BaiduMap"],BmScale:u["BmScale"],BmNavigation:u["BmNavigation"],BmGeolocation:u["BmGeolocation"],BmCopyright:u["BmCopyright"],BmMarker:u["BmMarker"],BmlMarkerClusterer:u["BmlMarkerClusterer"],BmInfoWindow:u["BmInfoWindow"]},created:function(){this.getList()},methods:{parseTime:d["g"],clickHandler:function(e){alert("单击点的坐标为：".concat(e.lng,", ").concat(e.lat))},getList:function(){var e=this;this.listLoading=!0,Object(m["a"])(this.listQuery).then(function(t){e.points=t.data.list;var a=e.points[0];e.center.lng=a.longitude,e.center.lat=a.latitude,e.isLoading=!1})},handler:function(e){e.BMap,e.map},infoWindowClose:function(e){this.showInfoWindow=!1},infoWindowClose2:function(e){this.showInfoWindow=!1},infoWindowOpen:function(e){var t=document.body.clientWidth-document.querySelector(".sidebar-container").offsetWidth,a=document.body.clientHeight-84;(e.currentTarget.z.width>t||e.currentTarget.z.height>a)&&(this.$message.warning("请把浏览器窗口最大化"),this.showInfoWindow=!1)},markerClick:function(e,t){console.log("点击"),this.showInfoWindow=!0,this.setShowInfoWindow(t),this.selectedData=e},getShowInfoWindow:function(e){return this.showInfoWindowArr[e]},setShowInfoWindow:function(e){this.showInfoWindowArr[e]=!0},getIconUrl:function(e){var t="",a="/static/img/map/trach/",n=e.devStatus,s=e.reportType;if("0"===n)switch(s){case"1":t="full.png";break;case"4":t="hot.png";break;case"8":t="tilt.png";break;case"16":t="lowbatv.png";break;case"32":t="error.png";break;case"0":case"2":case"64":case"128":t="normal.png";break}else t="error.png";return{url:a+t,size:{width:25,height:35}}}}},f=p,b=(a("3a46"),a("2877")),h=Object(b["a"])(f,r,i,!1,null,null,null),_=h.exports,v=(a("a0a5"),a("5f87")),g={name:"",components:{trach_editor:_},data:function(){return{currentRole:Object(v["a"])()}},computed:Object(o["a"])({},Object(l["b"])(["roles"])),created:function(){}},w=g,D=Object(b["a"])(w,n,s,!1,null,null,null);t["default"]=D.exports},cf5f:function(e,t,a){}}]);