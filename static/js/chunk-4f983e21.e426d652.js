(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f983e21"],{"05f2":function(e,t,a){"use strict";function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.multiHeader,e.header,e.list),l=e.filename,s=(e.merges,e.autoWidth,e.bookType,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){});Promise.all([a.e("chunk-e69e90f4"),a.e("chunk-58293907")]).then(a.bind(null,"4bf8d")).then(function(e){var a=["id","在线状态","设备ID号","设备名称","设备类型","垃圾量L(mm)","溢满度L","垃圾量R(mm)","溢满度R","温度(℃)","电压(mV)","倾角(°)","信号强度(dBm)","上报类型","设备状态","连接方式","网络地址","经度","纬度","更新时间","维护人","组织结构","备注"],i=["id","lineStatus","devId","devName","devType","rubbishL","rubbishML","rubbishR","rubbishMR","tmp","batV","angle","signalQ","reportType","devStatus","connectType","devSimNum","latitude","longitude","combination","rubbishHeight"],r=n(i,t);e.export_json_to_excel({header:a,data:r,filename:l}),s()})}function n(e,t){return t.map(function(t){return e.map(function(e){return"devStatus"===e?s[t[e]]:"reportType"===e?i[t[e]]:"onlineStatus"===e?lineStatusArr[t[e]]:"devType"===e?"垃圾箱监控器":"rubbishML"===e?(100*t.rubbishL/t.rubbishHeight).toFixed(1)+"%":"rubbishMR"===e?(100*t.rubbishR/t.rubbishHeight).toFixed(1)+"%":"tmp"===e?(t.tmp/100).toFixed(2)+"%":t[e]})})}a.d(t,"a",function(){return l}),a.d(t,"b",function(){return s}),a.d(t,"d",function(){return i}),a.d(t,"c",function(){return r});var s={0:"正常",1:"打开/倾斜",2:"距离传感器异常",4:"三轴传感器异常",8:"温度传感器异常",16:"外部存储异常",32:"RTC 时钟异常",64:"电池异常",128:"GPS 异常"},i={0:"实时上报",1:"垃圾溢满上报",2:"垃圾清理上报",4:"超温上报",8:"倾斜上报",16:"电池欠压上报",32:"部件故障上报",64:"多报数据",128:"心跳信号"},r={1:"在线",2:"异常",3:"离线"}},"1a1d":function(e,t,a){"use strict";a.d(t,"a",function(){return s});var l=a("b775"),n=a("ed08");function s(e){return Object(l["a"])({url:Object(n["e"])("/allTerminalDataShow",e),method:"get"})}},"333d":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];a("c5f6");Math.easeInOutQuad=function(e,t,a,l){return e/=l/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,a){var l=r(),n=e-l,o=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=o;var r=Math.easeInOutQuad(u,l,n,t);i(r),u<t?s(e):a&&"function"===typeof a&&a()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&o(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&o(0,800)}}},c=u,d=(a("dfcf"),a("2877")),m=Object(d["a"])(c,l,n,!1,null,"38ef71f0",null);t["a"]=m.exports},6724:function(e,t,a){"use strict";var l=a("5176"),n=a.n(l),s=(a("8d41"),"@@wavesContext");function i(e,t){function a(a){var l=n()({},t.value),s=n()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},l),i=s.ele;if(i){i.style.position="relative",i.style.overflow="hidden";var r=i.getBoundingClientRect(),o=i.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":(o=document.createElement("span"),o.className="waves-ripple",o.style.height=o.style.width=Math.max(r.width,r.height)+"px",i.appendChild(o)),s.type){case"center":o.style.top=r.height/2-o.offsetHeight/2+"px",o.style.left=r.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(a.pageY-r.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(a.pageX-r.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=s.color,o.className="waves-ripple z-active",!1}}return e[s]?e[s].removeHandle=a:e[s]={removeHandle:a},a}var r={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[s].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[s].removeHandle,!1),e[s]=null,delete e[s]}},o=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(o)),r.install=o;t["a"]=r},"690d":function(e,t,a){},"8d41":function(e,t,a){},ddcf:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a(e.currentRole,{tag:"component"})],1)},n=[],s=a("cebc"),i=a("2f62"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"设备名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.username,callback:function(t){e.$set(e.listQuery,"username",t)},expression:"listQuery.username"}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:e.downloadLoading,type:"primary",icon:"document"},on:{click:e.handleDownload}},[e._v(e._s(e.$t("excel.export"))+" Excel")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"",border:"",fit:"","highlight-current-row":"",height:"calc(100vh - 280px)"},on:{"row-dblclick":e.openDetail}},[a("el-table-column",{attrs:{type:"index",width:"40",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{label:"在线状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:"status status_"+t.row.onlineStatus},[e._v(e._s(e.onlineStatusArr[t.row.onlineStatus]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备ID号",align:"center",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/terminal/history-data"}},[a("span",{staticClass:"dev_id",on:{click:function(t){e.dialogTableVisible=!0}}},[e._v(e._s(t.row.devId))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备名称",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.devName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"垃圾量L",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.rubbishL))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"溢满度L",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((100*t.row.rubbishL/t.row.rubbishHeight).toFixed(1))+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"垃圾量R",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.rubbishR))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"溢满度R",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((100*t.row.rubbishR/t.row.rubbishHeight).toFixed(1))+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"温度",align:"center",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.tmp/100).toFixed(2))+"℃")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"电压",align:"center",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.batV)+"mV")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"倾角",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.angle)+"°")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"信号强度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.signalQ)+" dBm")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上报类型",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.reportTypeArr[t.row.reportType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备状态",align:"center",width:"105"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.devStatusArr[t.row.devStatus]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"连接类型",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.connectType))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"网络地址",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.devSimNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.eventTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"维护人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.maintenanceMan))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"组织结构",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.combination))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.remark))])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.pageNo,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNo",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:"详细信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.selectedData}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"设备ID：","label-width":"80"}},[a("span",[e._v(e._s(e.selectedData.devId))])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"设备名称：","label-width":"80"}},[a("span",[e._v(e._s(e.selectedData.devName))])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"在线状态：","label-width":"80"}},[a("span",{class:"status status_"+e.selectedData.onlineStatus},[e._v(e._s(e.onlineStatusArr[e.selectedData.onlineStatus]))])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"垃圾量L：","label-width":"80"}},[a("span",[e._v(e._s(e.selectedData.rubbishL)+" mm")])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"溢满度L：","label-width":"80"}},[a("span",[e._v(e._s((100*e.selectedData.rubbishL/e.selectedData.rubbishHeight).toFixed(1))+" %")])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"垃圾量R：","label-width":"80"}},[a("span",[e._v(e._s(e.selectedData.rubbishR)+" mm")])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"溢满度R：","label-width":"80"}},[a("span",[e._v(e._s((100*e.selectedData.rubbishR/e.selectedData.rubbishHeight).toFixed(1))+" %")])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"温度：","label-width":"80"}},[a("span",[e._v(e._s((e.selectedData.tmp/100).toFixed(2))+"℃")])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"电压：","label-width":"80"}},[a("span",[e._v(e._s(e.selectedData.batV)+" mV")])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"倾角：","label-width":"80"}},[a("span",[e._v(e._s(e.selectedData.angle)+"°")])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"信号强度：","label-width":"80"}},[a("span",[e._v(e._s(e.selectedData.signalQ)+" dBm")])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"上报类型：","label-width":"80"}},[a("span",[e._v(e._s(e.reportTypeArr[e.selectedData.reportType]))])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"设备状态：","label-width":"80"}},[a("span",[e._v(e._s(e.devStatusArr[e.selectedData.devStatus]))])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"连接类型：","label-width":"80"}},[a("span",[e._v(e._s(e.selectedData.connectType))])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"网络地址：","label-width":"80"}},[a("span",[e._v(e._s(e.selectedData.devSimNum))])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"更新时间：","label-width":"80"}},[a("span",[e._v(e._s(e.parseTime(e.selectedData.dev_id)))])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"维护人：","label-width":"80"}},[a("span")])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("el-form-item",{attrs:{label:"组织机构：","label-width":"80"}},[a("span",[e._v(e._s(e.selectedData.combination))])])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24}},[a("el-form-item",{attrs:{label:"备注：","label-width":"80"}},[a("span")])],1)],1)],1)],1)],1)},o=[],u=a("333d"),c=a("ed08"),d=a("6724"),m=a("05f2"),p=a("1a1d"),f={name:"",components:{Pagination:u["a"]},directives:{waves:d["a"]},data:function(){return{dialogFormVisible:!1,selectedData:{},tableKey:0,listLoading:!0,list:null,total:0,listQuery:{pageNo:1,pageSize:20,timeRange:"",username:void 0,type:void 0,sort:"+id"},downloadLoading:!1,devStatusArr:m["b"],reportTypeArr:m["d"],onlineStatusArr:m["c"]}},created:function(){this.getList()},methods:{parseTime:c["g"],getList:function(){var e=this;this.listLoading=!0,Object(p["a"])(this.listQuery).then(function(t){e.list=t.data.list,e.total=t.data.total,e.listLoading=!1})},handleFilter:function(){this.listQuery.page=1,this.getList()},handleDownload:function(){var e=this;this.downloadLoading=!0,Object(m["a"])({list:this.list,filename:"垃圾箱实时数据_"+Object(c["g"])(new Date,"{y}-{m}-{d}")},function(){e.downloadLoading=!1})},openDetail:function(e){this.dialogFormVisible=!0,this.selectedData=e}}},b=f,v=(a("f9c4"),a("2877")),h=Object(v["a"])(b,r,o,!1,null,"36597f76",null),_=h.exports,g=(a("a0a5"),a("5f87")),w={name:"Dashboard",components:{trach_editor:_},data:function(){return{currentRole:Object(g["a"])()}},computed:Object(s["a"])({},Object(i["b"])(["roles"])),created:function(){}},y=w,S=Object(v["a"])(y,l,n,!1,null,null,null);t["default"]=S.exports},dfcf:function(e,t,a){"use strict";var l=a("690d"),n=a.n(l);n.a},e259:function(e,t,a){},f9c4:function(e,t,a){"use strict";var l=a("e259"),n=a.n(l);n.a}}]);